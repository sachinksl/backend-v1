{"ast":null,"code":"var _jsxFileName = \"/Users/sachinkansal/seller-disclosure-portal/src/components/PropertyList.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/components/PropertyList.jsx\nimport { useEffect, useState } from 'react';\nimport { Box, Button, Dialog, DialogTitle, DialogContent, DialogActions, TextField, List, ListItem, ListItemText, Typography } from '@mui/material';\nimport { listProperties, createProperty, getMe } from '../api'; // ensure listProperties & getMe exist\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PropertyList() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [items, setItems] = useState([]);\n  const [open, setOpen] = useState(false);\n\n  // form fields\n  const [title, setTitle] = useState('');\n  const [address, setAddress] = useState('');\n  const [type, setType] = useState('house');\n  const [sellerEmail, setSellerEmail] = useState(''); // optional\n\n  const refresh = async () => setItems(await listProperties());\n  useEffect(() => {\n    (async () => {\n      try {\n        const me = await getMe(); // or pass user as a prop if you already have it\n        setUser(me);\n      } catch {}\n      refresh();\n    })();\n  }, []);\n\n  // ðŸ‘‰ compute role gate\n  const roles = (user === null || user === void 0 ? void 0 : user.roles) || [];\n  const canCreate = roles.includes('Agent') || roles.includes('Admin');\n\n  // ðŸ‘‰ onCreate with try/catch showing server error\n  const onCreate = async () => {\n    try {\n      await createProperty({\n        title,\n        address,\n        type,\n        sellerEmail\n      }); // sellerEmail optional\n      setOpen(false);\n      setTitle('');\n      setAddress('');\n      setType('house');\n      setSellerEmail('');\n      await refresh();\n    } catch (e) {\n      alert(e.message); // will show 401/403/400 with server text\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    maxWidth: 800,\n    mx: \"auto\",\n    mt: 4,\n    p: 3,\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      mb: 2,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: \"Properties\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), canCreate && /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: () => setOpen(true),\n        children: \"New Property\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      children: [items.map(p => /*#__PURE__*/_jsxDEV(ListItem, {\n        button: true,\n        component: \"a\",\n        href: `/properties/${p.id}`,\n        children: /*#__PURE__*/_jsxDEV(ListItemText, {\n          primary: p.title,\n          secondary: `${p.address} â€¢ ${p.type}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)\n      }, p.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)), items.length === 0 && /*#__PURE__*/_jsxDEV(ListItem, {\n        children: /*#__PURE__*/_jsxDEV(ListItemText, {\n          primary: \"No properties yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: () => setOpen(false),\n      fullWidth: true,\n      maxWidth: \"sm\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"New Property\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          margin: \"dense\",\n          label: \"Title\",\n          value: title,\n          onChange: e => setTitle(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          margin: \"dense\",\n          label: \"Address\",\n          value: address,\n          onChange: e => setAddress(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          margin: \"dense\",\n          label: \"Type (e.g., house, unit)\",\n          value: type,\n          onChange: e => setType(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          margin: \"dense\",\n          label: \"Seller Email (optional, must be in your org)\",\n          value: sellerEmail,\n          onChange: e => setSellerEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOpen(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: onCreate,\n          children: \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(PropertyList, \"TbiOIEXfugj3SlBY5YrgnqaDJpk=\");\n_c = PropertyList;\nvar _c;\n$RefreshReg$(_c, \"PropertyList\");","map":{"version":3,"names":["useEffect","useState","Box","Button","Dialog","DialogTitle","DialogContent","DialogActions","TextField","List","ListItem","ListItemText","Typography","listProperties","createProperty","getMe","jsxDEV","_jsxDEV","PropertyList","_s","user","setUser","items","setItems","open","setOpen","title","setTitle","address","setAddress","type","setType","sellerEmail","setSellerEmail","refresh","me","roles","canCreate","includes","onCreate","e","alert","message","maxWidth","mx","mt","p","children","display","justifyContent","alignItems","mb","variant","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","button","component","href","id","primary","secondary","length","onClose","fullWidth","margin","label","value","onChange","target","_c","$RefreshReg$"],"sources":["/Users/sachinkansal/seller-disclosure-portal/src/components/PropertyList.jsx"],"sourcesContent":["// frontend/src/components/PropertyList.jsx\nimport { useEffect, useState } from 'react';\nimport { Box, Button, Dialog, DialogTitle, DialogContent, DialogActions, TextField, List, ListItem, ListItemText, Typography } from '@mui/material';\nimport { listProperties, createProperty, getMe } from '../api'; // ensure listProperties & getMe exist\n\nexport default function PropertyList() {\n  const [user, setUser] = useState(null);\n  const [items, setItems] = useState([]);\n  const [open, setOpen] = useState(false);\n\n  // form fields\n  const [title, setTitle] = useState('');\n  const [address, setAddress] = useState('');\n  const [type, setType] = useState('house');\n  const [sellerEmail, setSellerEmail] = useState(''); // optional\n\n  const refresh = async () => setItems(await listProperties());\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const me = await getMe();      // or pass user as a prop if you already have it\n        setUser(me);\n      } catch {}\n      refresh();\n    })();\n  }, []);\n\n  // ðŸ‘‰ compute role gate\n  const roles = user?.roles || [];\n  const canCreate = roles.includes('Agent') || roles.includes('Admin');\n\n  // ðŸ‘‰ onCreate with try/catch showing server error\n  const onCreate = async () => {\n    try {\n      await createProperty({ title, address, type, sellerEmail }); // sellerEmail optional\n      setOpen(false);\n      setTitle(''); setAddress(''); setType('house'); setSellerEmail('');\n      await refresh();\n    } catch (e) {\n      alert(e.message); // will show 401/403/400 with server text\n    }\n  };\n\n  return (\n    <Box maxWidth={800} mx=\"auto\" mt={4} p={3}>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\n        <Typography variant=\"h5\">Properties</Typography>\n\n        {/* ðŸ‘‰ gate the button by role */}\n        {canCreate && (\n          <Button variant=\"contained\" onClick={() => setOpen(true)}>\n            New Property\n          </Button>\n        )}\n      </Box>\n\n      <List>\n        {items.map(p => (\n          <ListItem key={p.id} button component=\"a\" href={`/properties/${p.id}`}>\n            <ListItemText primary={p.title} secondary={`${p.address} â€¢ ${p.type}`} />\n          </ListItem>\n        ))}\n        {items.length === 0 && <ListItem><ListItemText primary=\"No properties yet.\" /></ListItem>}\n      </List>\n\n      {/* Simple create dialog */}\n      <Dialog open={open} onClose={() => setOpen(false)} fullWidth maxWidth=\"sm\">\n        <DialogTitle>New Property</DialogTitle>\n        <DialogContent>\n          <TextField fullWidth margin=\"dense\" label=\"Title\" value={title} onChange={e => setTitle(e.target.value)} />\n          <TextField fullWidth margin=\"dense\" label=\"Address\" value={address} onChange={e => setAddress(e.target.value)} />\n          <TextField fullWidth margin=\"dense\" label=\"Type (e.g., house, unit)\" value={type} onChange={e => setType(e.target.value)} />\n          <TextField fullWidth margin=\"dense\" label=\"Seller Email (optional, must be in your org)\" value={sellerEmail} onChange={e => setSellerEmail(e.target.value)} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)}>Cancel</Button>\n          <Button variant=\"contained\" onClick={onCreate}>Create</Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}